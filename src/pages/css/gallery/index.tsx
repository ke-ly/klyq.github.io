import { FC, useEffect, ChangeEvent, FormEvent, useRef, CSSProperties, useMemo, useCallback } from 'react'
import { useFetch, useFn, useImmer } from '@/hooks'
import { PEXELS_AUTHORIZATION } from '@/config'
import styles from './gallery.less'
import { Page, Icon } from '@/components'
import classNames from 'classnames'
import { throttle } from '@/util'

interface Iimage {
	id: number
	src: string
	width: number
	height: number
}

const WIDTH = 300
const HEIGHT = 240
const SIZE = 600

const pex = JSON.parse(
	`{"page":1,"per_page":30,"photos":[{"id":417173,"width":4872,"height":3248,"url":"https://www.pexels.com/photo/gray-and-brown-mountain-417173/","photographer":"Pixabay","photographer_url":"https://www.pexels.com/@pixabay","photographer_id":2659,"avg_color":"#45799B","src":{"original":"https://images.pexels.com/photos/417173/pexels-photo-417173.jpeg","large2x":"https://images.pexels.com/photos/417173/pexels-photo-417173.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/417173/pexels-photo-417173.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/417173/pexels-photo-417173.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/417173/pexels-photo-417173.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/417173/pexels-photo-417173.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/417173/pexels-photo-417173.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/417173/pexels-photo-417173.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":691668,"width":5472,"height":3648,"url":"https://www.pexels.com/photo/landscape-photography-of-mountains-covered-in-snow-691668/","photographer":"eberhard grossgasteiger","photographer_url":"https://www.pexels.com/@eberhardgross","photographer_id":121938,"avg_color":"#9DA1A7","src":{"original":"https://images.pexels.com/photos/691668/pexels-photo-691668.jpeg","large2x":"https://images.pexels.com/photos/691668/pexels-photo-691668.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/691668/pexels-photo-691668.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/691668/pexels-photo-691668.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/691668/pexels-photo-691668.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/691668/pexels-photo-691668.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/691668/pexels-photo-691668.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/691668/pexels-photo-691668.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":1054218,"width":6000,"height":4000,"url":"https://www.pexels.com/photo/snow-top-mountain-under-clear-sky-1054218/","photographer":"Stephan Seeber","photographer_url":"https://www.pexels.com/@stywo","photographer_id":396539,"avg_color":"#4C6D76","src":{"original":"https://images.pexels.com/photos/1054218/pexels-photo-1054218.jpeg","large2x":"https://images.pexels.com/photos/1054218/pexels-photo-1054218.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/1054218/pexels-photo-1054218.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/1054218/pexels-photo-1054218.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/1054218/pexels-photo-1054218.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/1054218/pexels-photo-1054218.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/1054218/pexels-photo-1054218.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/1054218/pexels-photo-1054218.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":414171,"width":2400,"height":1228,"url":"https://www.pexels.com/photo/top-view-of-valley-near-body-of-water-414171/","photographer":"Pixabay","photographer_url":"https://www.pexels.com/@pixabay","photographer_id":2659,"avg_color":"#676358","src":{"original":"https://images.pexels.com/photos/414171/pexels-photo-414171.jpeg","large2x":"https://images.pexels.com/photos/414171/pexels-photo-414171.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/414171/pexels-photo-414171.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/414171/pexels-photo-414171.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/414171/pexels-photo-414171.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/414171/pexels-photo-414171.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/414171/pexels-photo-414171.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/414171/pexels-photo-414171.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":1366919,"width":2000,"height":3000,"url":"https://www.pexels.com/photo/landscape-photography-of-snowy-mountain-1366919/","photographer":"eberhard grossgasteiger","photographer_url":"https://www.pexels.com/@eberhardgross","photographer_id":121938,"avg_color":"#75767A","src":{"original":"https://images.pexels.com/photos/1366919/pexels-photo-1366919.jpeg","large2x":"https://images.pexels.com/photos/1366919/pexels-photo-1366919.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/1366919/pexels-photo-1366919.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/1366919/pexels-photo-1366919.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/1366919/pexels-photo-1366919.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/1366919/pexels-photo-1366919.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/1366919/pexels-photo-1366919.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/1366919/pexels-photo-1366919.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":1670187,"width":3333,"height":5000,"url":"https://www.pexels.com/photo/mountain-range-under-beige-sky-1670187/","photographer":"eberhard grossgasteiger","photographer_url":"https://www.pexels.com/@eberhardgross","photographer_id":121938,"avg_color":"#887373","src":{"original":"https://images.pexels.com/photos/1670187/pexels-photo-1670187.jpeg","large2x":"https://images.pexels.com/photos/1670187/pexels-photo-1670187.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/1670187/pexels-photo-1670187.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/1670187/pexels-photo-1670187.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/1670187/pexels-photo-1670187.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/1670187/pexels-photo-1670187.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/1670187/pexels-photo-1670187.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/1670187/pexels-photo-1670187.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":747964,"width":4000,"height":2525,"url":"https://www.pexels.com/photo/a-person-sitting-on-wooden-planks-across-the-lake-scenery-747964/","photographer":"S Migaj","photographer_url":"https://www.pexels.com/@simonmigaj","photographer_id":233851,"avg_color":"#77857D","src":{"original":"https://images.pexels.com/photos/747964/pexels-photo-747964.jpeg","large2x":"https://images.pexels.com/photos/747964/pexels-photo-747964.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/747964/pexels-photo-747964.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/747964/pexels-photo-747964.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/747964/pexels-photo-747964.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/747964/pexels-photo-747964.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/747964/pexels-photo-747964.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/747964/pexels-photo-747964.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":361104,"width":6160,"height":3856,"url":"https://www.pexels.com/photo/green-forest-near-mountain-range-under-clear-sky-361104/","photographer":"Albert White","photographer_url":"https://www.pexels.com/@albert-white-117273","photographer_id":117273,"avg_color":"#657270","src":{"original":"https://images.pexels.com/photos/361104/pexels-photo-361104.jpeg","large2x":"https://images.pexels.com/photos/361104/pexels-photo-361104.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/361104/pexels-photo-361104.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/361104/pexels-photo-361104.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/361104/pexels-photo-361104.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/361104/pexels-photo-361104.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/361104/pexels-photo-361104.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/361104/pexels-photo-361104.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":372098,"width":7360,"height":4912,"url":"https://www.pexels.com/photo/accomplishment-action-adult-adventure-372098/","photographer":"Pixabay","photographer_url":"https://www.pexels.com/@pixabay","photographer_id":2659,"avg_color":"#7A94B6","src":{"original":"https://images.pexels.com/photos/372098/pexels-photo-372098.jpeg","large2x":"https://images.pexels.com/photos/372098/pexels-photo-372098.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/372098/pexels-photo-372098.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/372098/pexels-photo-372098.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/372098/pexels-photo-372098.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/372098/pexels-photo-372098.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/372098/pexels-photo-372098.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/372098/pexels-photo-372098.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":291732,"width":2992,"height":2000,"url":"https://www.pexels.com/photo/panoramic-photography-of-alps-291732/","photographer":"Tim Gouw","photographer_url":"https://www.pexels.com/@punttim","photographer_id":8202,"avg_color":"#7994AA","src":{"original":"https://images.pexels.com/photos/291732/pexels-photo-291732.jpeg","large2x":"https://images.pexels.com/photos/291732/pexels-photo-291732.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/291732/pexels-photo-291732.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/291732/pexels-photo-291732.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/291732/pexels-photo-291732.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/291732/pexels-photo-291732.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/291732/pexels-photo-291732.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/291732/pexels-photo-291732.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":355747,"width":5472,"height":2976,"url":"https://www.pexels.com/photo/adventure-alpine-background-black-and-white-355747/","photographer":"Pixabay","photographer_url":"https://www.pexels.com/@pixabay","photographer_id":2659,"avg_color":"#9B9B9B","src":{"original":"https://images.pexels.com/photos/355747/pexels-photo-355747.jpeg","large2x":"https://images.pexels.com/photos/355747/pexels-photo-355747.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/355747/pexels-photo-355747.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/355747/pexels-photo-355747.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/355747/pexels-photo-355747.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/355747/pexels-photo-355747.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/355747/pexels-photo-355747.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/355747/pexels-photo-355747.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":326058,"width":3000,"height":1994,"url":"https://www.pexels.com/photo/scenic-view-of-lake-and-mountains-against-sky-326058/","photographer":"Pixabay","photographer_url":"https://www.pexels.com/@pixabay","photographer_id":2659,"avg_color":"#949595","src":{"original":"https://images.pexels.com/photos/326058/pexels-photo-326058.jpeg","large2x":"https://images.pexels.com/photos/326058/pexels-photo-326058.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/326058/pexels-photo-326058.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/326058/pexels-photo-326058.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/326058/pexels-photo-326058.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/326058/pexels-photo-326058.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/326058/pexels-photo-326058.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/326058/pexels-photo-326058.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":1366909,"width":2000,"height":3000,"url":"https://www.pexels.com/photo/low-angle-shot-of-rock-formation-1366909/","photographer":"eberhard grossgasteiger","photographer_url":"https://www.pexels.com/@eberhardgross","photographer_id":121938,"avg_color":"#897C75","src":{"original":"https://images.pexels.com/photos/1366909/pexels-photo-1366909.jpeg","large2x":"https://images.pexels.com/photos/1366909/pexels-photo-1366909.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/1366909/pexels-photo-1366909.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/1366909/pexels-photo-1366909.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/1366909/pexels-photo-1366909.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/1366909/pexels-photo-1366909.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/1366909/pexels-photo-1366909.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/1366909/pexels-photo-1366909.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":1955134,"width":4000,"height":6000,"url":"https://www.pexels.com/photo/empty-highway-overlooking-mountain-under-dark-skies-1955134/","photographer":"Sebastian Palomino","photographer_url":"https://www.pexels.com/@sebastian-palomino-933481","photographer_id":933481,"avg_color":"#747576","src":{"original":"https://images.pexels.com/photos/1955134/pexels-photo-1955134.jpeg","large2x":"https://images.pexels.com/photos/1955134/pexels-photo-1955134.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/1955134/pexels-photo-1955134.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/1955134/pexels-photo-1955134.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/1955134/pexels-photo-1955134.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/1955134/pexels-photo-1955134.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/1955134/pexels-photo-1955134.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/1955134/pexels-photo-1955134.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":540518,"width":6016,"height":3306,"url":"https://www.pexels.com/photo/black-and-teal-mountain-540518/","photographer":"Billel Moula","photographer_url":"https://www.pexels.com/@billelmoula","photographer_id":162753,"avg_color":"#516D6F","src":{"original":"https://images.pexels.com/photos/540518/pexels-photo-540518.jpeg","large2x":"https://images.pexels.com/photos/540518/pexels-photo-540518.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/540518/pexels-photo-540518.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/540518/pexels-photo-540518.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/540518/pexels-photo-540518.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/540518/pexels-photo-540518.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/540518/pexels-photo-540518.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/540518/pexels-photo-540518.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":1624496,"width":3000,"height":4500,"url":"https://www.pexels.com/photo/mountain-at-night-under-a-starry-sky-1624496/","photographer":"eberhard grossgasteiger","photographer_url":"https://www.pexels.com/@eberhardgross","photographer_id":121938,"avg_color":"#202122","src":{"original":"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg","large2x":"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":1743165,"width":3000,"height":3974,"url":"https://www.pexels.com/photo/cropland-duiring-night-time-1743165/","photographer":"Aron Visuals","photographer_url":"https://www.pexels.com/@aronvisuals","photographer_id":738077,"avg_color":"#1B5264","src":{"original":"https://images.pexels.com/photos/1743165/pexels-photo-1743165.jpeg","large2x":"https://images.pexels.com/photos/1743165/pexels-photo-1743165.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/1743165/pexels-photo-1743165.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/1743165/pexels-photo-1743165.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/1743165/pexels-photo-1743165.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/1743165/pexels-photo-1743165.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/1743165/pexels-photo-1743165.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/1743165/pexels-photo-1743165.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":869258,"width":3992,"height":2242,"url":"https://www.pexels.com/photo/two-man-hiking-on-snow-mountain-869258/","photographer":"Flo Maderebner","photographer_url":"https://www.pexels.com/@fmaderebner","photographer_id":67200,"avg_color":"#C4CCD4","src":{"original":"https://images.pexels.com/photos/869258/pexels-photo-869258.jpeg","large2x":"https://images.pexels.com/photos/869258/pexels-photo-869258.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/869258/pexels-photo-869258.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/869258/pexels-photo-869258.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/869258/pexels-photo-869258.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/869258/pexels-photo-869258.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/869258/pexels-photo-869258.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/869258/pexels-photo-869258.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":572897,"width":6914,"height":4463,"url":"https://www.pexels.com/photo/mountain-covered-snow-under-star-572897/","photographer":"eberhard grossgasteiger","photographer_url":"https://www.pexels.com/@eberhardgross","photographer_id":121938,"avg_color":"#5D5A63","src":{"original":"https://images.pexels.com/photos/572897/pexels-photo-572897.jpeg","large2x":"https://images.pexels.com/photos/572897/pexels-photo-572897.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/572897/pexels-photo-572897.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/572897/pexels-photo-572897.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/572897/pexels-photo-572897.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/572897/pexels-photo-572897.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/572897/pexels-photo-572897.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/572897/pexels-photo-572897.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":417074,"width":4226,"height":2847,"url":"https://www.pexels.com/photo/lake-and-mountain-417074/","photographer":"James Wheeler","photographer_url":"https://www.pexels.com/@souvenirpixels","photographer_id":558609,"avg_color":"#346F7B","src":{"original":"https://images.pexels.com/photos/417074/pexels-photo-417074.jpeg","large2x":"https://images.pexels.com/photos/417074/pexels-photo-417074.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/417074/pexels-photo-417074.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/417074/pexels-photo-417074.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/417074/pexels-photo-417074.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/417074/pexels-photo-417074.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/417074/pexels-photo-417074.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/417074/pexels-photo-417074.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":714258,"width":3972,"height":2648,"url":"https://www.pexels.com/photo/mountain-ranges-covered-in-snow-714258/","photographer":"Denis Linine","photographer_url":"https://www.pexels.com/@denis-linine-214373","photographer_id":214373,"avg_color":"#90ABCB","src":{"original":"https://images.pexels.com/photos/714258/pexels-photo-714258.jpeg","large2x":"https://images.pexels.com/photos/714258/pexels-photo-714258.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/714258/pexels-photo-714258.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/714258/pexels-photo-714258.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/714258/pexels-photo-714258.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/714258/pexels-photo-714258.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/714258/pexels-photo-714258.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/714258/pexels-photo-714258.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":167684,"width":6000,"height":4000,"url":"https://www.pexels.com/photo/green-leafed-trees-during-fog-time-167684/","photographer":"Lum3n","photographer_url":"https://www.pexels.com/@lum3n-44775","photographer_id":44775,"avg_color":"#6B7576","src":{"original":"https://images.pexels.com/photos/167684/pexels-photo-167684.jpeg","large2x":"https://images.pexels.com/photos/167684/pexels-photo-167684.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/167684/pexels-photo-167684.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/167684/pexels-photo-167684.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/167684/pexels-photo-167684.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/167684/pexels-photo-167684.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/167684/pexels-photo-167684.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/167684/pexels-photo-167684.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":913215,"width":4288,"height":2848,"url":"https://www.pexels.com/photo/selective-focus-photographed-of-green-mountain-913215/","photographer":"Archie Binamira","photographer_url":"https://www.pexels.com/@chiecharon","photographer_id":209623,"avg_color":"#638191","src":{"original":"https://images.pexels.com/photos/913215/pexels-photo-913215.jpeg","large2x":"https://images.pexels.com/photos/913215/pexels-photo-913215.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/913215/pexels-photo-913215.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/913215/pexels-photo-913215.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/913215/pexels-photo-913215.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/913215/pexels-photo-913215.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/913215/pexels-photo-913215.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/913215/pexels-photo-913215.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":673020,"width":5472,"height":3648,"url":"https://www.pexels.com/photo/grand-canyon-673020/","photographer":"eberhard grossgasteiger","photographer_url":"https://www.pexels.com/@eberhardgross","photographer_id":121938,"avg_color":"#3F463E","src":{"original":"https://images.pexels.com/photos/673020/pexels-photo-673020.jpeg","large2x":"https://images.pexels.com/photos/673020/pexels-photo-673020.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/673020/pexels-photo-673020.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/673020/pexels-photo-673020.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/673020/pexels-photo-673020.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/673020/pexels-photo-673020.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/673020/pexels-photo-673020.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/673020/pexels-photo-673020.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":355241,"width":4608,"height":2592,"url":"https://www.pexels.com/photo/bird-s-eye-view-of-snow-coated-mountains-355241/","photographer":"Pixabay","photographer_url":"https://www.pexels.com/@pixabay","photographer_id":2659,"avg_color":"#728BA7","src":{"original":"https://images.pexels.com/photos/355241/pexels-photo-355241.jpeg","large2x":"https://images.pexels.com/photos/355241/pexels-photo-355241.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/355241/pexels-photo-355241.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/355241/pexels-photo-355241.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/355241/pexels-photo-355241.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/355241/pexels-photo-355241.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/355241/pexels-photo-355241.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/355241/pexels-photo-355241.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":1699030,"width":3648,"height":5472,"url":"https://www.pexels.com/photo/rocky-mountain-1699030/","photographer":"eberhard grossgasteiger","photographer_url":"https://www.pexels.com/@eberhardgross","photographer_id":121938,"avg_color":"#8E8A91","src":{"original":"https://images.pexels.com/photos/1699030/pexels-photo-1699030.jpeg","large2x":"https://images.pexels.com/photos/1699030/pexels-photo-1699030.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/1699030/pexels-photo-1699030.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/1699030/pexels-photo-1699030.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/1699030/pexels-photo-1699030.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/1699030/pexels-photo-1699030.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/1699030/pexels-photo-1699030.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/1699030/pexels-photo-1699030.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":163550,"width":3000,"height":2002,"url":"https://www.pexels.com/photo/aerial-view-of-green-mountain-163550/","photographer":"Pixabay","photographer_url":"https://www.pexels.com/@pixabay","photographer_id":2659,"avg_color":"#66685E","src":{"original":"https://images.pexels.com/photos/163550/landscape-scenic-going-to-the-sun-road-rocky-mountains-163550.jpeg","large2x":"https://images.pexels.com/photos/163550/landscape-scenic-going-to-the-sun-road-rocky-mountains-163550.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/163550/landscape-scenic-going-to-the-sun-road-rocky-mountains-163550.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/163550/landscape-scenic-going-to-the-sun-road-rocky-mountains-163550.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/163550/landscape-scenic-going-to-the-sun-road-rocky-mountains-163550.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/163550/landscape-scenic-going-to-the-sun-road-rocky-mountains-163550.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/163550/landscape-scenic-going-to-the-sun-road-rocky-mountains-163550.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/163550/landscape-scenic-going-to-the-sun-road-rocky-mountains-163550.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":1576937,"width":4000,"height":5191,"url":"https://www.pexels.com/photo/person-standing-on-top-of-rock-1576937/","photographer":"Suliman Sallehi","photographer_url":"https://www.pexels.com/@sulimansallehi","photographer_id":218279,"avg_color":"#3E5358","src":{"original":"https://images.pexels.com/photos/1576937/pexels-photo-1576937.jpeg","large2x":"https://images.pexels.com/photos/1576937/pexels-photo-1576937.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/1576937/pexels-photo-1576937.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/1576937/pexels-photo-1576937.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/1576937/pexels-photo-1576937.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/1576937/pexels-photo-1576937.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/1576937/pexels-photo-1576937.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/1576937/pexels-photo-1576937.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":1624504,"width":3648,"height":5472,"url":"https://www.pexels.com/photo/mountain-under-starry-sky-1624504/","photographer":"eberhard grossgasteiger","photographer_url":"https://www.pexels.com/@eberhardgross","photographer_id":121938,"avg_color":"#59616A","src":{"original":"https://images.pexels.com/photos/1624504/pexels-photo-1624504.jpeg","large2x":"https://images.pexels.com/photos/1624504/pexels-photo-1624504.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/1624504/pexels-photo-1624504.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/1624504/pexels-photo-1624504.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/1624504/pexels-photo-1624504.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/1624504/pexels-photo-1624504.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/1624504/pexels-photo-1624504.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/1624504/pexels-photo-1624504.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false},{"id":633198,"width":5184,"height":3456,"url":"https://www.pexels.com/photo/brown-and-white-mountain-633198/","photographer":"Tyler Lastovich","photographer_url":"https://www.pexels.com/@lastly","photographer_id":129858,"avg_color":"#8C929E","src":{"original":"https://images.pexels.com/photos/633198/pexels-photo-633198.jpeg","large2x":"https://images.pexels.com/photos/633198/pexels-photo-633198.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=2\u0026h=650\u0026w=940","large":"https://images.pexels.com/photos/633198/pexels-photo-633198.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=650\u0026w=940","medium":"https://images.pexels.com/photos/633198/pexels-photo-633198.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=350","small":"https://images.pexels.com/photos/633198/pexels-photo-633198.jpeg?auto=compress\u0026cs=tinysrgb\u0026h=130","portrait":"https://images.pexels.com/photos/633198/pexels-photo-633198.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=1200\u0026w=800","landscape":"https://images.pexels.com/photos/633198/pexels-photo-633198.jpeg?auto=compress\u0026cs=tinysrgb\u0026fit=crop\u0026h=627\u0026w=1200","tiny":"https://images.pexels.com/photos/633198/pexels-photo-633198.jpeg?auto=compress\u0026cs=tinysrgb\u0026dpr=1\u0026fit=crop\u0026h=200\u0026w=280"},"liked":false}],"total_results":8000,"next_page":"https://api.pexels.com/v1/search/?page=2\u0026per_page=30\u0026query=mountain"}`,
)

const CURATED = ['nature', 'mountain', 'sea']

const SHOWTYPE = {
	// enum 也可以
	default: Symbol(),
	waterFall: Symbol(),
}

const Gallery: FC = () => {
	const container = useRef<HTMLElement>(null)

	const [state, setState] = useImmer({
		showType: SHOWTYPE.waterFall,
		query: '',
		wrapperWidth: '100%',
		vw: 0,
	})

	const {
		data = [],
		run,
		loading,
	} = useFetch<Iimage[]>(`/api/fun/getmenu`, {
		// https://api.pexels.com/v1/search
		headers: {
			Authorization: PEXELS_AUTHORIZATION,
		},
		method: 'get',
		body: {
			query: state.query || CURATED[Math.floor(Math.random() * CURATED.length)],
			per_page: 30,
		},
		ref: container,
		loadMore: true,
		formatResult(d) {
			console.log(pex)

			return pex.photos.map((item: any, idx: number) => {
				if (idx === 9) {
					return {
						id: item.id,
						src: `https://img.weixiaoqu.com/images/uploads/5741/202109/8a29aa3de3a716b6a7b2f1c2e962dc85.png`,
						height: 2300,
						width: 658,
					}
				}
				return {
					id: item.id,
					src: `${item.src.original}?auto=compress&cs=tinysrgb&${state.showType === SHOWTYPE.waterFall ? 'w' : 'h'}=${SIZE}&end=1'`,
					height: item.height,
					width: item.width,
				}
			})
			// .filter((_: any, x: number) => x < 8)
		},
	})

	const handleInputChange = useFn((e: ChangeEvent<HTMLInputElement>) => {
		e.persist()
		setState((draft) => {
			draft.query = e.target.value
		})
	})

	const handleToggleShowType = useFn(() => {
		setState((draft) => {
			draft.showType = draft.showType === SHOWTYPE.default ? SHOWTYPE.waterFall : SHOWTYPE.default
		})
	})

	const handleSearch = async (e: FormEvent<HTMLFormElement>) => {
		e.preventDefault()
		run()
	}

	useEffect(() => {
		window.addEventListener(
			'resize',
			throttle(function () {
				setState((draft) => {
					if (draft.vw !== window.innerWidth) {
						draft.vw = window.innerWidth
					}
				})
			}, 500),
		)
		return () => {
			window.removeEventListener('resize', function () {
				setState(() => null)
			})
		}
	}, [window.innerWidth])

	const memo = useMemo<{ list: Array<Iimage & { style: CSSProperties }>; maxWidth: string; maxHeight: string }>(() => {
		let maxWidth = 'auto'
		let maxHeight = 'auto'
		const rows: number[] = []
		const list = data.map((i, idx) => {
			let itemStyle: CSSProperties = {}
			if (state.showType === SHOWTYPE.waterFall) {
				const PADDING = 10 * 2
				const maxLen = Math.floor(window.innerWidth / WIDTH)
				const height = (WIDTH - PADDING) / (i.width / i.height) + PADDING
				let y = 0
				let x = 0
				maxWidth = `${maxLen * WIDTH}px`
				if (idx < maxLen) {
					rows.push(height)
					x = idx * WIDTH
				} else {
					const min = Math.min(...rows)
					const minIndex = rows.indexOf(min)
					y = min
					x = minIndex * WIDTH
					rows[minIndex] = min + height
				}
				maxHeight = Math.max(...rows) + 'px'
				itemStyle = {
					transform: `translateX(${x}px) translateY(${y}px)`,
					// height,
				}
			} else {
				const width = (i.width * HEIGHT) / i.height
				itemStyle = { flexBasis: width, flexGrow: (i.width * 10) / i.height }
			}
			return { ...i, style: itemStyle }
		})

		return {
			list,
			maxWidth,
			maxHeight,
		}
	}, [state.showType, data, state.vw])

	return (
		<Page className={styles.gallery}>
			<section className={styles.top}>
				<div className={styles.content}>
					<h1 className={styles.title}>The best free stock photos shared by talented creators.</h1>
					<div className={styles.searchBar}>
						<form onSubmit={handleSearch} className={styles.searchForm}>
							<input
								type="text"
								value={state.query}
								className={styles.searchInput}
								onChange={handleInputChange}
								placeholder="搜索免费的图片"
							/>
							<div className={styles.icon} onClick={handleToggleShowType}>
								{state.showType === SHOWTYPE.default ? (
									<Icon title="瀑布流" type="icon-pubuliu" />
								) : (
									<Icon title="默认布局" type="icon-layout-f" />
								)}
							</div>
						</form>
					</div>
				</div>
			</section>
			<section
				style={{ width: memo.maxWidth, height: memo.maxHeight }}
				className={classNames(styles.wrapper, {
					[styles.waterFall]: state.showType === SHOWTYPE.waterFall,
					[styles.defaultLayout]: state.showType === SHOWTYPE.default,
				})}
				ref={container}
			>
				{memo.list.map((i, idx) => {
					return (
						<a
							// href={i.src}
							// download="ad"
							key={idx}
							className={styles.item}
							style={{ ...i.style, '--width': WIDTH } as CSSProperties}
						>
							<em style={{ paddingBottom: `${(i.height / i.width) * 100}%` }}></em>
							<div className={styles.picture}>
								<img
									src={i.src}
									// style={{ height: i.style.height }}
								/>
							</div>
						</a>
					)
				})}
			</section>
			<div style={{ fontSize: 24, textAlign: 'center' }}>{loading ? '加载中....' : ''}</div>
		</Page>
	)
}

export default Gallery
